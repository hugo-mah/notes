{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to my notes.","title":"Welcome to my notes."},{"location":"#welcome-to-my-notes","text":"","title":"Welcome to my notes."},{"location":"ansible/","text":"Installer ansible pip index versions ansible pip install ansible==version Configurer ansible touch ansible.cfg vim ansible.cfg Contenu de ansible.cfg: { [defaults] inventory=./inventory } touch inventory vim inventory Contenu de inventory: { hostname ansible_host=0.0.0.0 ansible_user=user ansible_private_key_file=/path [group] hostname } Installer sshpass dnf install sshpass","title":"Installer"},{"location":"ansible/#installer-ansible","text":"pip index versions ansible pip install ansible==version","title":"Installer ansible"},{"location":"ansible/#configurer-ansible","text":"touch ansible.cfg vim ansible.cfg Contenu de ansible.cfg: { [defaults] inventory=./inventory } touch inventory vim inventory Contenu de inventory: { hostname ansible_host=0.0.0.0 ansible_user=user ansible_private_key_file=/path [group] hostname }","title":"Configurer ansible"},{"location":"ansible/#installer-sshpass","text":"dnf install sshpass","title":"Installer sshpass"},{"location":"ansible_commands/","text":"Commandes adhoc ansible -m ping host -m permet d'appeler un module ansible -k permet de demander le mot de passe pour l'authentification -bK permet de demander les privil\u00e8ges Commandes playbook Taches --- - hosts: linux tasks: - name: add a group group: name: exemple state: present Vars vars: collegue: - titi - tata - toto Handlers - name: Add line to conf file lineinfile: path: /path line: new line state: present delegate_to: hostname notify: Restart service handlers: - name: Restart service systemd: name: service state: restarted enabled: yes Un handlers est une tache \u00e0 ex\u00e9cuter uniquement si elle est appel\u00e9e en utilisant notify. Roles Un r\u00f4le est une structure de fichier qui permet de s\u00e9parer les \u00e9l\u00e9ments d'un playbook. ansible-galaxy role init name Permet de cr\u00e9er un role. tasks: permet de stocker les taches handler: stocke les handlers templates: template de texte files: fichier \u00e0 fournir pour le playbook vars: variables qui ne sont pas amen\u00e9es \u00e0 changer default: variables utilisables en extra vars Pour lancer un role, on cr\u00e9e un playbook qui appelle ce role: --- - hosts: webservers roles: - common - webservers","title":"Commandes et playbook"},{"location":"ansible_commands/#commandes-adhoc","text":"ansible -m ping host -m permet d'appeler un module ansible -k permet de demander le mot de passe pour l'authentification -bK permet de demander les privil\u00e8ges","title":"Commandes adhoc"},{"location":"ansible_commands/#commandes-playbook","text":"","title":"Commandes playbook"},{"location":"ansible_commands/#taches","text":"--- - hosts: linux tasks: - name: add a group group: name: exemple state: present","title":"Taches"},{"location":"ansible_commands/#vars","text":"vars: collegue: - titi - tata - toto","title":"Vars"},{"location":"ansible_commands/#handlers","text":"- name: Add line to conf file lineinfile: path: /path line: new line state: present delegate_to: hostname notify: Restart service handlers: - name: Restart service systemd: name: service state: restarted enabled: yes Un handlers est une tache \u00e0 ex\u00e9cuter uniquement si elle est appel\u00e9e en utilisant notify.","title":"Handlers"},{"location":"ansible_commands/#roles","text":"Un r\u00f4le est une structure de fichier qui permet de s\u00e9parer les \u00e9l\u00e9ments d'un playbook. ansible-galaxy role init name Permet de cr\u00e9er un role. tasks: permet de stocker les taches handler: stocke les handlers templates: template de texte files: fichier \u00e0 fournir pour le playbook vars: variables qui ne sont pas amen\u00e9es \u00e0 changer default: variables utilisables en extra vars Pour lancer un role, on cr\u00e9e un playbook qui appelle ce role: --- - hosts: webservers roles: - common - webservers","title":"Roles"},{"location":"apache/","text":"Installer apache dnf install httpd Configuration apache Fichier de conf: /ect/httpd/conf/httpd.conf La ligne documentroot montre l'endroit o\u00f9 apache va chercher son fichier index.html","title":"Configurer apache"},{"location":"apache/#installer-apache","text":"dnf install httpd","title":"Installer apache"},{"location":"apache/#configuration-apache","text":"Fichier de conf: /ect/httpd/conf/httpd.conf La ligne documentroot montre l'endroit o\u00f9 apache va chercher son fichier index.html","title":"Configuration apache"},{"location":"basic_storage/","text":"Stockage Cr\u00e9er partition parted : unit (s, B, MiB, MB): pr\u00e9ciser l'unit\u00e9 mklabel(msdos, gpt): cr\u00e9er un label mkpart(primary, extended, logical): cr\u00e9er une partition help: aide udevadm settle : toujours executer \u00e0 la fin Cr\u00e9er FS mkfs.xfs/mkfs.ext4 /dev/vdb1","title":"Stockage basique"},{"location":"basic_storage/#stockage","text":"","title":"Stockage"},{"location":"basic_storage/#creer-partition","text":"parted : unit (s, B, MiB, MB): pr\u00e9ciser l'unit\u00e9 mklabel(msdos, gpt): cr\u00e9er un label mkpart(primary, extended, logical): cr\u00e9er une partition help: aide udevadm settle : toujours executer \u00e0 la fin","title":"Cr\u00e9er partition"},{"location":"basic_storage/#creer-fs","text":"mkfs.xfs/mkfs.ext4 /dev/vdb1","title":"Cr\u00e9er FS"},{"location":"chrony/","text":"Chrony timedatectl : g\u00e9rer la config chronyd: daemon chronyc sourves -v config ntp tzselect : choisir une timezone Utiliser tzselect pour d\u00e9terminer la timezone Utiliser timedatectl set-timezone \"timezone\" pour appliquer le changement","title":"Chrony"},{"location":"chrony/#chrony","text":"timedatectl : g\u00e9rer la config chronyd: daemon chronyc sourves -v config ntp tzselect : choisir une timezone Utiliser tzselect pour d\u00e9terminer la timezone Utiliser timedatectl set-timezone \"timezone\" pour appliquer le changement","title":"Chrony"},{"location":"commandes_rhel/","text":"Commandes \u00e0 connaitre findmnt: montre l'arborescence syst\u00e8me df -h: voir les FS which: trouver le r\u00e9pertoire d'une commande ps aux: voir les processes lscpu: infos cpu top: monitorer le system ss: liste les connexions r\u00e9seau lsblk: voir les block device mkfs: cr\u00e9er un FS tune2fs: g\u00e9rer FS en ext4 xfs_admin: FS ex xfs blkid: voir les ID de FS history + !number: rappeler une commande CTRL+R: rechercher une commande man -k: chercher un man par mot-cl\u00e9 at: planifier des taches crontab: planifier des taches r\u00e9currentes udevadm settle: commandes \u00e0 executer apres cr\u00e9ation de stockage","title":"Commandes \u00e0 connaitre"},{"location":"commandes_rhel/#commandes-a-connaitre","text":"findmnt: montre l'arborescence syst\u00e8me df -h: voir les FS which: trouver le r\u00e9pertoire d'une commande ps aux: voir les processes lscpu: infos cpu top: monitorer le system ss: liste les connexions r\u00e9seau lsblk: voir les block device mkfs: cr\u00e9er un FS tune2fs: g\u00e9rer FS en ext4 xfs_admin: FS ex xfs blkid: voir les ID de FS history + !number: rappeler une commande CTRL+R: rechercher une commande man -k: chercher un man par mot-cl\u00e9 at: planifier des taches crontab: planifier des taches r\u00e9currentes udevadm settle: commandes \u00e0 executer apres cr\u00e9ation de stockage","title":"Commandes \u00e0 connaitre"},{"location":"container/","text":"Installer un container dnf install container-tools mkdir -p /home/user/.config/containers vim /home/user/.config/containers/registries.conf : unqualified-search-registries = ['registry.lab.example.com'] [[registry]] location = \"registry.lab.example.com\" insecure = true blocked = false podman login registry podman info : permet de v\u00e9rifier les registres de recherche podman search python-38 podman pull registry.access.redhat.com/ubi8/python-38 podman images Cr\u00e9er un container podman build -t python36:1.0 . podman create --name python36 <id> podman start python36 Commandes podman podman-build : cr\u00e9er un container avec un fichier container podman-run : lancer une commande dans un nouveau container podman-images : lister les images locales podman-ps : afficher les infos d'un container podman-inspect : affiche la configuration d'un container podman-pull : t\u00e9l\u00e9charge une image podman-cp : copie des fichiers entre le local et le container podman-exec : executer une commande dans un container en service podman-rm : retirer un ou plusieurs containers podman-rmi : retirer une ou plusieurs images locales podman-search : cherche une image","title":"Container"},{"location":"container/#installer-un-container","text":"dnf install container-tools mkdir -p /home/user/.config/containers vim /home/user/.config/containers/registries.conf : unqualified-search-registries = ['registry.lab.example.com'] [[registry]] location = \"registry.lab.example.com\" insecure = true blocked = false podman login registry podman info : permet de v\u00e9rifier les registres de recherche podman search python-38 podman pull registry.access.redhat.com/ubi8/python-38 podman images","title":"Installer un container"},{"location":"container/#creer-un-container","text":"podman build -t python36:1.0 . podman create --name python36 <id> podman start python36","title":"Cr\u00e9er un container"},{"location":"container/#commandes-podman","text":"podman-build : cr\u00e9er un container avec un fichier container podman-run : lancer une commande dans un nouveau container podman-images : lister les images locales podman-ps : afficher les infos d'un container podman-inspect : affiche la configuration d'un container podman-pull : t\u00e9l\u00e9charge une image podman-cp : copie des fichiers entre le local et le container podman-exec : executer une commande dans un container en service podman-rm : retirer un ou plusieurs containers podman-rmi : retirer une ou plusieurs images locales podman-search : cherche une image","title":"Commandes podman"},{"location":"create_lvm/","text":"Cr\u00e9er un LVM parted set lvm on : \u00e0 utiliser sur la partition o\u00f9 on souhaite faire du LVM Possibilit\u00e9 de le faire sur un disque entier sans partitionner pvcreate /dev/sdb vgcreate vgdata /dev/sdb lvcreate: -n lvdata -L 15G vgdata mkfs -t ext4 /dev/vgdata/lvdata Edit fstab pour qu'il se monte automatiquement o\u00f9 on veut LVM VDO Installer vdo et kmod-kvdo lvcreate --type vdo --name vdo-lv01 --size 5G vg01 : pr\u00e9ciser le type Inspecter LVM pvdisplay vgdisplay lvdisplay Resize LVM umount /dev/vgdata/lvdata e2fsck /dev/vgdata/lvdata lvreduce -r -L size /dev/vgdata/lvdata ATTENTION: le FS ne doit pas \u00eatre utilis\u00e9. vgextend lvextend XFS xfs_growfs : permet d'adapter la taille du FS au nouveau volume (XFS) EXT4 resize2fs : m\u00eame chose pour ext4 SWAP Ajouter du stockage au lv et reformater en swap avec mkswap Reduce LVM Reduce VG pvmove : retirer un PV vgreduce Remove lvremove vgremove pvremove","title":"Cr\u00e9er et resize un LVM"},{"location":"create_lvm/#creer-un-lvm","text":"parted set lvm on : \u00e0 utiliser sur la partition o\u00f9 on souhaite faire du LVM Possibilit\u00e9 de le faire sur un disque entier sans partitionner pvcreate /dev/sdb vgcreate vgdata /dev/sdb lvcreate: -n lvdata -L 15G vgdata mkfs -t ext4 /dev/vgdata/lvdata Edit fstab pour qu'il se monte automatiquement o\u00f9 on veut","title":"Cr\u00e9er un LVM"},{"location":"create_lvm/#lvm-vdo","text":"Installer vdo et kmod-kvdo lvcreate --type vdo --name vdo-lv01 --size 5G vg01 : pr\u00e9ciser le type","title":"LVM VDO"},{"location":"create_lvm/#inspecter-lvm","text":"pvdisplay vgdisplay lvdisplay","title":"Inspecter LVM"},{"location":"create_lvm/#resize-lvm","text":"umount /dev/vgdata/lvdata e2fsck /dev/vgdata/lvdata lvreduce -r -L size /dev/vgdata/lvdata ATTENTION: le FS ne doit pas \u00eatre utilis\u00e9. vgextend lvextend","title":"Resize LVM"},{"location":"create_lvm/#xfs","text":"xfs_growfs : permet d'adapter la taille du FS au nouveau volume (XFS)","title":"XFS"},{"location":"create_lvm/#ext4","text":"resize2fs : m\u00eame chose pour ext4","title":"EXT4"},{"location":"create_lvm/#swap","text":"Ajouter du stockage au lv et reformater en swap avec mkswap","title":"SWAP"},{"location":"create_lvm/#reduce-lvm","text":"","title":"Reduce LVM"},{"location":"create_lvm/#reduce-vg","text":"pvmove : retirer un PV vgreduce","title":"Reduce VG"},{"location":"create_lvm/#remove","text":"lvremove vgremove pvremove","title":"Remove"},{"location":"crontab/","text":"Crontab at : planifier des t\u00e2ches dans la journ\u00e9e ou le lendemain atq : voir les taches des diff\u00e9rents users atrm 5 : retirer le job 5 crontab -e # Example of job definition: # .---------------- minute (0 - 59) # | .------------- hour (0 - 23) # | | .---------- day of month (1 - 31) # | | | .------- month (1 - 12) OR jan,feb,mar,apr ... # | | | | .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat # | | | | | # * * * * * user-name command to be executed /etc/crontab, /etc/cron.d : utiliser pour \u00e9diter des jobs syst\u00e8me Anacron Permet de planifier des jobs qui seront ex\u00e9cut\u00e9s m\u00eame si le syst\u00e8me a \u00e9t\u00e9 \u00e9teint* Systemd Timer Programmer un service","title":"Crontab"},{"location":"crontab/#crontab","text":"at : planifier des t\u00e2ches dans la journ\u00e9e ou le lendemain atq : voir les taches des diff\u00e9rents users atrm 5 : retirer le job 5 crontab -e # Example of job definition: # .---------------- minute (0 - 59) # | .------------- hour (0 - 23) # | | .---------- day of month (1 - 31) # | | | .------- month (1 - 12) OR jan,feb,mar,apr ... # | | | | .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat # | | | | | # * * * * * user-name command to be executed /etc/crontab, /etc/cron.d : utiliser pour \u00e9diter des jobs syst\u00e8me","title":"Crontab"},{"location":"crontab/#anacron","text":"Permet de planifier des jobs qui seront ex\u00e9cut\u00e9s m\u00eame si le syst\u00e8me a \u00e9t\u00e9 \u00e9teint*","title":"Anacron"},{"location":"crontab/#systemd-timer","text":"Programmer un service","title":"Systemd Timer"},{"location":"emergency/","text":"Emergency mode Dans grub, appuyer sur \"e\" Ajouter: systemd.unit=emergency.target (ou rescue.target)","title":"Emergency mode"},{"location":"emergency/#emergency-mode","text":"Dans grub, appuyer sur \"e\" Ajouter: systemd.unit=emergency.target (ou rescue.target)","title":"Emergency mode"},{"location":"firewall/","text":"firewalld Zones block: refuse toutes les connexions entrantes dmz: seulements les connexions selectionn\u00e9es sont accept\u00e9es drop: tout packet entrant est recup\u00e9r\u00e9 et aucune reponse envoy\u00e9e external: utilis\u00e9 sur les routeurs (NAT) home: pour les r\u00e9seaux domestiques internal: pareil que home public: les autres ordinateurs du r\u00e9seau ne sont pas accept\u00e9s. trusted: toutes les connexions sont acceptes work: comme home et internal mais au travail Commande firewall-cmd","title":"Firewall"},{"location":"firewall/#firewalld","text":"","title":"firewalld"},{"location":"firewall/#zones","text":"block: refuse toutes les connexions entrantes dmz: seulements les connexions selectionn\u00e9es sont accept\u00e9es drop: tout packet entrant est recup\u00e9r\u00e9 et aucune reponse envoy\u00e9e external: utilis\u00e9 sur les routeurs (NAT) home: pour les r\u00e9seaux domestiques internal: pareil que home public: les autres ordinateurs du r\u00e9seau ne sont pas accept\u00e9s. trusted: toutes les connexions sont acceptes work: comme home et internal mais au travail","title":"Zones"},{"location":"firewall/#commande","text":"firewall-cmd","title":"Commande"},{"location":"git_commands/","text":"Git Commandes Git git init name : initialiser git git clone url : t\u00e9l\u00e9charge un projet git status : liste l'\u00e9tat de git et des nouveux fichiers' git diff : montre les modifs de fichier entre le unstage et le stage area git add : ajoute \u00e0 git git commit -am \"\" : commiter git branch : liste les branches locales git branch nom : cr\u00e9er une branche git checkout nom : change de branche git checkout -b nom : cr\u00e9e une branche et switch dessus git merge nom : fusionne la branche avec celle actuelle git branch -d : supprime la branche git rm : supprime le fichier git mv : renomme le fichier git log : montre l'historique des commits git reset commit : annule les commits apr\u00e8s commit git fetch : recupere l'historique du d\u00e9pot git push : envoie les commits git config --global user.name \"username\" git config --global user.email \"email\" git config --global --list : voir les infos git clone 'url' git rebase : permet de mettre \u00e0 jour une branche par rapport \u00e0 une autre git stash : permet de sauvegarder un projet sans le commiter et retravailler dessus quand on veut git tag -a : annoter un commit avec un tag (Ex: V1.1) Installer git https://git-scm.com Configurer Git New project git init new project git add file Existing project git init git add . Join existing project git clone 'url' Recup\u00e9rer un repo git pull origin master D\u00e9poser sur un repo git push origin master Annuler l'ajout d'un fichier git reset HEAD file Annuler les modifications d'un fichier git checkout -- file Cr\u00e9er un alias git config --global alias.name \"command Ignorer des fichiers Cr\u00e9er un fichier .gitignore et \u00e9crire le nom des fichiers \u00e0 ignorer Merging Il faut \u00eatre sur la branche vers laquelle on veut fusionner. Pr\u00e9ciser --no-ff pour \u00e9viter le fast forward (merge qui merge tous les commits de la branche). Stash vers une nouvelle branche git stash branch name Permet de prendre les modifications dans une branche et de les envoyer vers une autre. Git tag Permet de donner un tag \u00e0 des commits en particulier","title":"Commandes git"},{"location":"git_commands/#git","text":"","title":"Git"},{"location":"git_commands/#commandes-git","text":"git init name : initialiser git git clone url : t\u00e9l\u00e9charge un projet git status : liste l'\u00e9tat de git et des nouveux fichiers' git diff : montre les modifs de fichier entre le unstage et le stage area git add : ajoute \u00e0 git git commit -am \"\" : commiter git branch : liste les branches locales git branch nom : cr\u00e9er une branche git checkout nom : change de branche git checkout -b nom : cr\u00e9e une branche et switch dessus git merge nom : fusionne la branche avec celle actuelle git branch -d : supprime la branche git rm : supprime le fichier git mv : renomme le fichier git log : montre l'historique des commits git reset commit : annule les commits apr\u00e8s commit git fetch : recupere l'historique du d\u00e9pot git push : envoie les commits git config --global user.name \"username\" git config --global user.email \"email\" git config --global --list : voir les infos git clone 'url' git rebase : permet de mettre \u00e0 jour une branche par rapport \u00e0 une autre git stash : permet de sauvegarder un projet sans le commiter et retravailler dessus quand on veut git tag -a : annoter un commit avec un tag (Ex: V1.1)","title":"Commandes Git"},{"location":"git_commands/#installer-git","text":"https://git-scm.com","title":"Installer git"},{"location":"git_commands/#configurer-git","text":"","title":"Configurer Git"},{"location":"git_commands/#new-project","text":"git init new project git add file","title":"New project"},{"location":"git_commands/#existing-project","text":"git init git add .","title":"Existing project"},{"location":"git_commands/#join-existing-project","text":"git clone 'url'","title":"Join existing project"},{"location":"git_commands/#recuperer-un-repo","text":"git pull origin master","title":"Recup\u00e9rer un repo"},{"location":"git_commands/#deposer-sur-un-repo","text":"git push origin master","title":"D\u00e9poser sur un repo"},{"location":"git_commands/#annuler-lajout-dun-fichier","text":"git reset HEAD file","title":"Annuler l'ajout d'un fichier"},{"location":"git_commands/#annuler-les-modifications-dun-fichier","text":"git checkout -- file","title":"Annuler les modifications d'un fichier"},{"location":"git_commands/#creer-un-alias","text":"git config --global alias.name \"command","title":"Cr\u00e9er un alias"},{"location":"git_commands/#ignorer-des-fichiers","text":"Cr\u00e9er un fichier .gitignore et \u00e9crire le nom des fichiers \u00e0 ignorer","title":"Ignorer des fichiers"},{"location":"git_commands/#merging","text":"Il faut \u00eatre sur la branche vers laquelle on veut fusionner. Pr\u00e9ciser --no-ff pour \u00e9viter le fast forward (merge qui merge tous les commits de la branche).","title":"Merging"},{"location":"git_commands/#stash-vers-une-nouvelle-branche","text":"git stash branch name Permet de prendre les modifications dans une branche et de les envoyer vers une autre.","title":"Stash vers une nouvelle branche"},{"location":"git_commands/#git-tag","text":"Permet de donner un tag \u00e0 des commits en particulier","title":"Git tag"},{"location":"hostname/","text":"Hostname hostnamectl","title":"Hostname"},{"location":"hostname/#hostname","text":"hostnamectl","title":"Hostname"},{"location":"log/","text":"How to configure log Rsyslog /etc/rsyslog.d/*.conf /etc/rsyslog.conf Utiliser local0 \u00e0 local7 pour des logs personnalis\u00e9s logger -p facility.level message Facility: Priority level: debug info notice warning, warn (same as warning) err, error (same as err) crit alert emerg, panic (same as emerg) /var/log dossier de logs Logrotate Conf de logrotate dans /etc/logrotate.d/*: /var/log/http_check { daily compress dateext rotate 30 missingok } logrotate -f /etc/logrotate.d/* force le logrotate Journalctl Voir des logs Editer le fichier /etc/systemd/journald.conf: persistent: Stores journals in the /var/log/journal directory, which persists across reboots. If the /var/log/journal directory does not exist, then the systemd-journald service creates it. volatile: Stores journals in the volatile /run/log/journal directory. As the /run file system is temporary and exists only in the runtime memory, the data in it, including system journals, does not persist across a reboot. auto: If the /var/log/journal directory exists, then the systemd-journald service uses persistent storage; otherwise it uses volatile storage. This action is the default if you do not set the Storage parameter. none: Do not use any storage. The system drops all logs, but you can still forward the logs.","title":"Log"},{"location":"log/#how-to-configure-log","text":"","title":"How to configure log"},{"location":"log/#rsyslog","text":"/etc/rsyslog.d/*.conf /etc/rsyslog.conf Utiliser local0 \u00e0 local7 pour des logs personnalis\u00e9s logger -p facility.level message Facility: Priority level: debug info notice warning, warn (same as warning) err, error (same as err) crit alert emerg, panic (same as emerg) /var/log dossier de logs","title":"Rsyslog"},{"location":"log/#logrotate","text":"Conf de logrotate dans /etc/logrotate.d/*: /var/log/http_check { daily compress dateext rotate 30 missingok } logrotate -f /etc/logrotate.d/* force le logrotate","title":"Logrotate"},{"location":"log/#journalctl","text":"Voir des logs Editer le fichier /etc/systemd/journald.conf: persistent: Stores journals in the /var/log/journal directory, which persists across reboots. If the /var/log/journal directory does not exist, then the systemd-journald service creates it. volatile: Stores journals in the volatile /run/log/journal directory. As the /run file system is temporary and exists only in the runtime memory, the data in it, including system journals, does not persist across a reboot. auto: If the /var/log/journal directory exists, then the systemd-journald service uses persistent storage; otherwise it uses volatile storage. This action is the default if you do not set the Storage parameter. none: Do not use any storage. The system drops all logs, but you can still forward the logs.","title":"Journalctl"},{"location":"nagios_ncpa/","text":"Installer ncpa dnf install python3 alternatives --set python /usr/bin/python3 dnf install https://repo.nagios.com/nagios/8/nagios-repo-8-1.el8.noarch.rpm dnf install ncpa D\u00e9finir token dans /usr/local/ncpa/etc/ncpa.cfg firewall-cmd --add-port:5693/tcp cd /usr/lib64/nagios/plugins wget https://raw.githubusercontent.com/NagiosEnterprises/ncpa/master/client/check_ncpa.py Ajouter: define command { command_name check_ncpa command_line $USER1$/check_ncpa.py -H $HOSTADDRESS$ $ARG1$ } dans /etc/nagios/objects/commands.cfg Cr\u00e9er: define host { host_name hostname address ipaddress check_command check_ncpa!-t 'token' -P 5693 -M system/agent_version max_check_attempts 5 check_interval 5 retry_interval 1 check_period 24x7 contacts nagiosadmin notification_interval 60 notification_period 24x7 notifications_enabled 1 icon_image ncpa.png statusmap_image ncpa.png register 1 } define service { host_name hostname service_description CPU Usage check_command check_ncpa!-t 'token' -P 5693 -M cpu/percent -w 20 -c 40 -q 'aggregate=avg' max_check_attempts 5 check_interval 5 retry_interval 1 check_period 24x7 notification_interval 60 notification_period 24x7 contacts nagiosadmin register 1 } dans /etc/nagios/ncpa_hostname.cfg Ajouter: cfg_file=/etc/nagios/ncpa_hostname.cfg dans /etc/nagios/nagios.cfg","title":"Client ncpa"},{"location":"nagios_ncpa/#installer-ncpa","text":"dnf install python3 alternatives --set python /usr/bin/python3 dnf install https://repo.nagios.com/nagios/8/nagios-repo-8-1.el8.noarch.rpm dnf install ncpa D\u00e9finir token dans /usr/local/ncpa/etc/ncpa.cfg firewall-cmd --add-port:5693/tcp cd /usr/lib64/nagios/plugins wget https://raw.githubusercontent.com/NagiosEnterprises/ncpa/master/client/check_ncpa.py Ajouter: define command { command_name check_ncpa command_line $USER1$/check_ncpa.py -H $HOSTADDRESS$ $ARG1$ } dans /etc/nagios/objects/commands.cfg Cr\u00e9er: define host { host_name hostname address ipaddress check_command check_ncpa!-t 'token' -P 5693 -M system/agent_version max_check_attempts 5 check_interval 5 retry_interval 1 check_period 24x7 contacts nagiosadmin notification_interval 60 notification_period 24x7 notifications_enabled 1 icon_image ncpa.png statusmap_image ncpa.png register 1 } define service { host_name hostname service_description CPU Usage check_command check_ncpa!-t 'token' -P 5693 -M cpu/percent -w 20 -c 40 -q 'aggregate=avg' max_check_attempts 5 check_interval 5 retry_interval 1 check_period 24x7 notification_interval 60 notification_period 24x7 contacts nagiosadmin register 1 } dans /etc/nagios/ncpa_hostname.cfg Ajouter: cfg_file=/etc/nagios/ncpa_hostname.cfg dans /etc/nagios/nagios.cfg","title":"Installer ncpa"},{"location":"nagios_server/","text":"Installer Nagios Core Installer python3 dnf install python3 Installer apache Voir Configurer apache firewall-cmd --add-port=80/tcp --permanent Installation nagios Repository codeready-builder RHEL subscription-manager repos --enable codeready-builder-for-rhel-8-x86_64-rpms Repository EPEL dnf install https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm Configurer nagios dnf install nagios dnf install python3-passlib htpasswd -c /etc/nagios/htpasswd.users user Remplacer les lignes AuthUserFile.* dans /etc/httpd/conf.d/nagios.conf par AuthUserFile /etc/nagios/htpasswd.users","title":"Serveur"},{"location":"nagios_server/#installer-nagios-core","text":"","title":"Installer Nagios Core"},{"location":"nagios_server/#installer-python3","text":"dnf install python3","title":"Installer python3"},{"location":"nagios_server/#installer-apache","text":"Voir Configurer apache firewall-cmd --add-port=80/tcp --permanent","title":"Installer apache"},{"location":"nagios_server/#installation-nagios","text":"","title":"Installation nagios"},{"location":"nagios_server/#repository-codeready-builder-rhel","text":"subscription-manager repos --enable codeready-builder-for-rhel-8-x86_64-rpms","title":"Repository codeready-builder RHEL"},{"location":"nagios_server/#repository-epel","text":"dnf install https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm","title":"Repository EPEL"},{"location":"nagios_server/#configurer-nagios","text":"dnf install nagios dnf install python3-passlib htpasswd -c /etc/nagios/htpasswd.users user Remplacer les lignes AuthUserFile.* dans /etc/httpd/conf.d/nagios.conf par AuthUserFile /etc/nagios/htpasswd.users","title":"Configurer nagios"},{"location":"nfs/","text":"Network File System Installation dnf install nfs-utils Config Ajouter \u00e0 /etc/fstab: server.lab.example.com:/shares/public /public nfs rw,sync 0 0 Autofs Service qui monte et remonte automatiquement les FS si besoin Installation sudo dnf install autofs nfs-utils Configuration systemctl enable --now autofs Master Map vim /etc/auto.master.d/demo.autofs : Pour une Indirect Map: /shares /etc/auto.demo Pour une Direct Map: /- /etc/auto.direct Indirect Map sudo vim /etc/auto.demo : work -rw,sync serverb:/shares/work Direct Map Permet de donner le chemin pr\u00e9cis \u00e0 monter sudo vim /etc/auto.direct : /mnt/docs -rw,sync serverb:/shares/docs","title":"NFS"},{"location":"nfs/#network-file-system","text":"","title":"Network File System"},{"location":"nfs/#installation","text":"dnf install nfs-utils","title":"Installation"},{"location":"nfs/#config","text":"Ajouter \u00e0 /etc/fstab: server.lab.example.com:/shares/public /public nfs rw,sync 0 0","title":"Config"},{"location":"nfs/#autofs","text":"Service qui monte et remonte automatiquement les FS si besoin","title":"Autofs"},{"location":"nfs/#installation_1","text":"sudo dnf install autofs nfs-utils","title":"Installation"},{"location":"nfs/#configuration","text":"systemctl enable --now autofs","title":"Configuration"},{"location":"nfs/#master-map","text":"vim /etc/auto.master.d/demo.autofs : Pour une Indirect Map: /shares /etc/auto.demo Pour une Direct Map: /- /etc/auto.direct","title":"Master Map"},{"location":"nfs/#indirect-map","text":"sudo vim /etc/auto.demo : work -rw,sync serverb:/shares/work","title":"Indirect Map"},{"location":"nfs/#direct-map","text":"Permet de donner le chemin pr\u00e9cis \u00e0 monter sudo vim /etc/auto.direct : /mnt/docs -rw,sync serverb:/shares/docs","title":"Direct Map"},{"location":"packet/","text":"RPM rpm -qa : liste les paquets rpm -q package : version rpm -ql package : liste les fichiers install\u00e9s DNF dnf list dnf history dnf history undo x dnf repolist all dnf config-manager --enable rhel-9-server-debug-rpms dnf config-manager --add-repo=\"url\" repos stock\u00e9s dans /etc/yum.repos.d rpm --import url : importer cl\u00e9 gpg dnf install urlrepo : installer repo","title":"Gestion de packets"},{"location":"packet/#rpm","text":"rpm -qa : liste les paquets rpm -q package : version rpm -ql package : liste les fichiers install\u00e9s","title":"RPM"},{"location":"packet/#dnf","text":"dnf list dnf history dnf history undo x dnf repolist all dnf config-manager --enable rhel-9-server-debug-rpms dnf config-manager --add-repo=\"url\" repos stock\u00e9s dans /etc/yum.repos.d rpm --import url : importer cl\u00e9 gpg dnf install urlrepo : installer repo","title":"DNF"},{"location":"pip_venv/","text":"Cr\u00e9er l'environnement virtuel python3 -m venv name Lancer l'environnement virtuel source activate /path","title":"Cr\u00e9er un environnement virtuel"},{"location":"pip_venv/#creer-lenvironnement-virtuel","text":"python3 -m venv name","title":"Cr\u00e9er l'environnement virtuel"},{"location":"pip_venv/#lancer-lenvironnement-virtuel","text":"source activate /path","title":"Lancer l'environnement virtuel"},{"location":"priority/","text":"Tuned Installer tuned avec dnf tuned-adm Priority and nice value Utiliser top pour voir la PR et le NI Le NI va de -20 \u00e0 19, plus il est bas plus il est important Un process avec un PR de 20 o\u00f9 on applique un NI de -20 aura un PR de 0 nice & renice","title":"Process priority"},{"location":"priority/#tuned","text":"Installer tuned avec dnf tuned-adm","title":"Tuned"},{"location":"priority/#priority-and-nice-value","text":"Utiliser top pour voir la PR et le NI Le NI va de -20 \u00e0 19, plus il est bas plus il est important Un process avec un PR de 20 o\u00f9 on applique un NI de -20 aura un PR de 0 nice & renice","title":"Priority and nice value"},{"location":"repo/","text":"Repository dnf repolist all : liste les repos disponibles dnf config-manager --enable reponame dnf config-manager --add-repo=\"url\" Fichiers de conf repo dans /etc/yum.repos.d Exemple de conf: [EPEL] name=EPEL 9 baseurl=https://dl.fedoraproject.org/pub/epel/9/Everything/x86_64/ enabled=1 gpgcheck=1 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-9","title":"Repository"},{"location":"repo/#repository","text":"dnf repolist all : liste les repos disponibles dnf config-manager --enable reponame dnf config-manager --add-repo=\"url\" Fichiers de conf repo dans /etc/yum.repos.d Exemple de conf: [EPEL] name=EPEL 9 baseurl=https://dl.fedoraproject.org/pub/epel/9/Everything/x86_64/ enabled=1 gpgcheck=1 gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-9","title":"Repository"},{"location":"root_password/","text":"R\u00e9initialiser MDP root Red\u00e9marrer Dans le menu GRUB, appuyer sur \"e\" changer quiet par rd.break mount -o remount,rw /sysroot chroot /sysroot Changer le mdp touch /.autorelabel","title":"R\u00e9initialiser mot de passe root"},{"location":"root_password/#reinitialiser-mdp-root","text":"Red\u00e9marrer Dans le menu GRUB, appuyer sur \"e\" changer quiet par rd.break mount -o remount,rw /sysroot chroot /sysroot Changer le mdp touch /.autorelabel","title":"R\u00e9initialiser MDP root"},{"location":"selinux/","text":"SELinux ATTENTION: policycoreutils et policycoreutils-python-utils doivent \u00eatre install\u00e9s /etc/selinux/config: d\u00e9finir l'\u00e9tat de selinux getenforce & setenforce (ATTENTION: TEMPORAIRE) chcon permet de modifier un context de mani\u00e8re temporaire, il disparaitra si on utilise restorecon semanage fcontext permet de g\u00e9rer les contextes de fichier: -l: list -a: add -d: delete Exemple: semanage fcontext -a -t httpd_sys_content_t '/virtual(/.*)?' restorecon /path applique les modification au r\u00e9pertoire et \u00e0 tous les fichiers \u00e0 l'int\u00e9rieur: -R, -r: recursive v: verbose getsebool setsebool semanage boolean sealert -a /var/log/audit/audit.log liste les incidents selinux sealert -l id analyser les alertes selinux SELinux avec firewall SELinux attribut \u00e0 certains services l'utilisation de ports autoris\u00e9s (EX: ssh 22/tcp) semanage port -l Pour modifier le context d'un port: semanage port -a -t port_label -p tcp|udp PORTNUMBER","title":"SELinux"},{"location":"selinux/#selinux","text":"ATTENTION: policycoreutils et policycoreutils-python-utils doivent \u00eatre install\u00e9s /etc/selinux/config: d\u00e9finir l'\u00e9tat de selinux getenforce & setenforce (ATTENTION: TEMPORAIRE) chcon permet de modifier un context de mani\u00e8re temporaire, il disparaitra si on utilise restorecon semanage fcontext permet de g\u00e9rer les contextes de fichier: -l: list -a: add -d: delete Exemple: semanage fcontext -a -t httpd_sys_content_t '/virtual(/.*)?' restorecon /path applique les modification au r\u00e9pertoire et \u00e0 tous les fichiers \u00e0 l'int\u00e9rieur: -R, -r: recursive v: verbose getsebool setsebool semanage boolean sealert -a /var/log/audit/audit.log liste les incidents selinux sealert -l id analyser les alertes selinux","title":"SELinux"},{"location":"selinux/#selinux-avec-firewall","text":"SELinux attribut \u00e0 certains services l'utilisation de ports autoris\u00e9s (EX: ssh 22/tcp) semanage port -l Pour modifier le context d'un port: semanage port -a -t port_label -p tcp|udp PORTNUMBER","title":"SELinux avec firewall"},{"location":"shell-expansion/","text":"Regex \"?\" : remplace 1 lettre \"*\" : 0 ou plusieurs lettres [abc]: un caract\u00e8re parmi a, b ou c [!abc]: un caract\u00e8re saus a, b ou c [[:alpha:]]: une lettre [[:lower:]]: une lettre minuscule [[:upper:]]: une lettre majuscule [[:digit:]]: un chiffre ^: d\u00e9but de ligne $: fin de ligne touch hugo{0..9}: cr\u00e9e un fichier hugo0, hugo1, ..., hugo9","title":"Regex"},{"location":"shell-expansion/#regex","text":"\"?\" : remplace 1 lettre \"*\" : 0 ou plusieurs lettres [abc]: un caract\u00e8re parmi a, b ou c [!abc]: un caract\u00e8re saus a, b ou c [[:alpha:]]: une lettre [[:lower:]]: une lettre minuscule [[:upper:]]: une lettre majuscule [[:digit:]]: un chiffre ^: d\u00e9but de ligne $: fin de ligne touch hugo{0..9}: cr\u00e9e un fichier hugo0, hugo1, ..., hugo9","title":"Regex"},{"location":"ssh/","text":"SSH Config: /etc/ssh/sshd_config ~/.ssh/config : host servera HostName servera.example.com User usera IdentityFile ~/.ssh/id_rsa_servera","title":"SSH"},{"location":"ssh/#ssh","text":"Config: /etc/ssh/sshd_config ~/.ssh/config : host servera HostName servera.example.com User usera IdentityFile ~/.ssh/id_rsa_servera","title":"SSH"},{"location":"ssh_keys/","text":"Cl\u00e9s SSH ssh-keygen -t rsa -b 4096 ssh-copy-id user@ipaddr ssh -i /path/private_key user@ipaddr","title":"Cr\u00e9ation de cl\u00e9s priv\u00e9es"},{"location":"ssh_keys/#cles-ssh","text":"ssh-keygen -t rsa -b 4096 ssh-copy-id user@ipaddr ssh -i /path/private_key user@ipaddr","title":"Cl\u00e9s SSH"},{"location":"ssl/","text":"SSL/TLS Utilis\u00e9 pour s\u00e9curiser les \u00e9changes en HTTPS. Fonctionnement HTTP Les \u00e9changes entre le serveur et le client se font sans chiffrement et peuvent \u00eatre intercept\u00e9s et lus en clair. HTTPS sans cl\u00e9s asym\u00e9triques Le client et le serveur \u00e9changent des infos gr\u00e2ce \u00e0 une cl\u00e9 sym\u00e9trique. Ils la poss\u00e9dent tous les deux et cela leur permet de d\u00e9chiffrer les \u00e9changes. Ils doivent se partager cette cl\u00e9 et si quelqu'un l'intercepte il pourra d\u00e9chiffrer les messages. HTTPS avec cl\u00e9s asym\u00e9triques sans CA Le serveur poss\u00e8de une paire de cl\u00e9s rsa (priv\u00e9e et publique). Le serveur envoie au client sa cl\u00e9 publique afin qu'il puisse chiffrer les donn\u00e9es qu'il transmet. Gr\u00e2ce \u00e0 \u00e7a, le client envoie la cl\u00e9 de chiffrement sym\u00e9trique chiffr\u00e9e avec la cl\u00e9 publique, que le serveur va d\u00e9chiffrer gr\u00e2ce \u00e0 la cl\u00e9 priv\u00e9e. Ils poss\u00e8dent donc chacun la cl\u00e9 sym\u00e9trique sans l'avoir envoy\u00e9e en clair. Mais si quelqu'un s'est fait passer pour le serveur et a envoy\u00e9 ses propres cl\u00e9s \u00e0 la place de celles du serveur, il pourra d\u00e9chiffrer les messages. HTTPS Une authorit\u00e9 de certification poss\u00e8de une paire de cl\u00e9 rsa. La cl\u00e9e priv\u00e9e est s\u00e9curis\u00e9e et personne ne la connait, et la cl\u00e9 publique est distribu\u00e9e \u00e0 tous les navigateurs, et sera consid\u00e9r\u00e9e comme une cl\u00e9 v\u00e9rifi\u00e9e. Un serveur web veut certifier son identit\u00e9. Il va cr\u00e9er une paire de cl\u00e9 rsa. Il va envoyer une requ\u00e8te \u00e0 une CA avec des informations comme le nom de domaine, la cl\u00e9 publique du serveur et d'autres informations. Toutes ces informations vont \u00eatre chiffr\u00e9es gr\u00e2ce \u00e0 un algorithme et le hash obtenu sera appel\u00e9 empreinte du certificat. La CA va renvoyer ce certificat root en incluant l'empreinte, et va signer cette empreinte avec sa cl\u00e9 priv\u00e9e (elle sera donc chiffr\u00e9e). On appelle \u00e7a la signature du certificat. Un client souhaite se connecter au serveur web. Il va envoyer un Hello au serveur. Le serveur r\u00e9pond en envoyant son certificat root contenant sa cl\u00e9 publique. Le serveur re\u00e7oit le certificat. Il va utiliser la cl\u00e9 publique du CA pour d\u00e9chiffrer la signature du certificat pour obtenir l'empreinte. Il va ensuite chiffrer gr\u00e2ce \u00e0 l'algorithme communiqu\u00e9 l'ensemble des informations du certificat pour obtenir l'empreinte \u00e0 nouveau. Il va comparer les deux empreintes. Si elles sont identiques, l'identit\u00e9 du serveur est valid\u00e9e. Si elles sont diff\u00e9rentes, cela veut dire que des informations ont \u00e9t\u00e9 modif\u00e9es dans le certificat ou alors que ce n'est pas un certificat valide, il refuse donc la connexion. Si la connexion est valid\u00e9e, alors il utilise la cl\u00e9 publique pour envoyer sa cl\u00e9 sym\u00e9trique chiffr\u00e9e au serveur qui pourra la d\u00e9chiffrer gr\u00e2ce \u00e0 sa cl\u00e9 priv\u00e9e. Ils peuvent alors initialiser la connexion s\u00e9curis\u00e9e gr\u00e2ce \u00e0 la cl\u00e9 sym\u00e9trique. OpenSSL Commande qui permet de g\u00e9rer les certificats et les cl\u00e9s de chiffrement .csr = non sign\u00e9 .crt = sign\u00e9 openssl genrsa -out mysite.key 4096 : cr\u00e9ation de cl\u00e9s RSA (les deux sont contenues dans mysite.key) openssl req -new -key mysite.key -out mysite.csr : cr\u00e9ation d'une requ\u00eate \u00e0 partir d'une cl\u00e9 openssl req -x509 -newkey rsa:4096 -keyout mysite.key -out mysite.crt -days 365 : (x509=format certificat) cr\u00e9er un certificat autosign\u00e9 openssl x509 -in mysite.crt -text -noout : lire un certificat openssl x509 -req -in site.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out site.crt -extfile site.cnf -extensions req... : signer une requete avec une CA Faire attention aux subject alternative name (obligatoire)","title":"Fonctionnement"},{"location":"ssl/#ssltls","text":"Utilis\u00e9 pour s\u00e9curiser les \u00e9changes en HTTPS.","title":"SSL/TLS"},{"location":"ssl/#fonctionnement","text":"","title":"Fonctionnement"},{"location":"ssl/#http","text":"Les \u00e9changes entre le serveur et le client se font sans chiffrement et peuvent \u00eatre intercept\u00e9s et lus en clair.","title":"HTTP"},{"location":"ssl/#https-sans-cles-asymetriques","text":"Le client et le serveur \u00e9changent des infos gr\u00e2ce \u00e0 une cl\u00e9 sym\u00e9trique. Ils la poss\u00e9dent tous les deux et cela leur permet de d\u00e9chiffrer les \u00e9changes. Ils doivent se partager cette cl\u00e9 et si quelqu'un l'intercepte il pourra d\u00e9chiffrer les messages.","title":"HTTPS sans cl\u00e9s asym\u00e9triques"},{"location":"ssl/#https-avec-cles-asymetriques-sans-ca","text":"Le serveur poss\u00e8de une paire de cl\u00e9s rsa (priv\u00e9e et publique). Le serveur envoie au client sa cl\u00e9 publique afin qu'il puisse chiffrer les donn\u00e9es qu'il transmet. Gr\u00e2ce \u00e0 \u00e7a, le client envoie la cl\u00e9 de chiffrement sym\u00e9trique chiffr\u00e9e avec la cl\u00e9 publique, que le serveur va d\u00e9chiffrer gr\u00e2ce \u00e0 la cl\u00e9 priv\u00e9e. Ils poss\u00e8dent donc chacun la cl\u00e9 sym\u00e9trique sans l'avoir envoy\u00e9e en clair. Mais si quelqu'un s'est fait passer pour le serveur et a envoy\u00e9 ses propres cl\u00e9s \u00e0 la place de celles du serveur, il pourra d\u00e9chiffrer les messages.","title":"HTTPS avec cl\u00e9s asym\u00e9triques sans CA"},{"location":"ssl/#https","text":"Une authorit\u00e9 de certification poss\u00e8de une paire de cl\u00e9 rsa. La cl\u00e9e priv\u00e9e est s\u00e9curis\u00e9e et personne ne la connait, et la cl\u00e9 publique est distribu\u00e9e \u00e0 tous les navigateurs, et sera consid\u00e9r\u00e9e comme une cl\u00e9 v\u00e9rifi\u00e9e. Un serveur web veut certifier son identit\u00e9. Il va cr\u00e9er une paire de cl\u00e9 rsa. Il va envoyer une requ\u00e8te \u00e0 une CA avec des informations comme le nom de domaine, la cl\u00e9 publique du serveur et d'autres informations. Toutes ces informations vont \u00eatre chiffr\u00e9es gr\u00e2ce \u00e0 un algorithme et le hash obtenu sera appel\u00e9 empreinte du certificat. La CA va renvoyer ce certificat root en incluant l'empreinte, et va signer cette empreinte avec sa cl\u00e9 priv\u00e9e (elle sera donc chiffr\u00e9e). On appelle \u00e7a la signature du certificat. Un client souhaite se connecter au serveur web. Il va envoyer un Hello au serveur. Le serveur r\u00e9pond en envoyant son certificat root contenant sa cl\u00e9 publique. Le serveur re\u00e7oit le certificat. Il va utiliser la cl\u00e9 publique du CA pour d\u00e9chiffrer la signature du certificat pour obtenir l'empreinte. Il va ensuite chiffrer gr\u00e2ce \u00e0 l'algorithme communiqu\u00e9 l'ensemble des informations du certificat pour obtenir l'empreinte \u00e0 nouveau. Il va comparer les deux empreintes. Si elles sont identiques, l'identit\u00e9 du serveur est valid\u00e9e. Si elles sont diff\u00e9rentes, cela veut dire que des informations ont \u00e9t\u00e9 modif\u00e9es dans le certificat ou alors que ce n'est pas un certificat valide, il refuse donc la connexion. Si la connexion est valid\u00e9e, alors il utilise la cl\u00e9 publique pour envoyer sa cl\u00e9 sym\u00e9trique chiffr\u00e9e au serveur qui pourra la d\u00e9chiffrer gr\u00e2ce \u00e0 sa cl\u00e9 priv\u00e9e. Ils peuvent alors initialiser la connexion s\u00e9curis\u00e9e gr\u00e2ce \u00e0 la cl\u00e9 sym\u00e9trique.","title":"HTTPS"},{"location":"ssl/#openssl","text":"Commande qui permet de g\u00e9rer les certificats et les cl\u00e9s de chiffrement .csr = non sign\u00e9 .crt = sign\u00e9 openssl genrsa -out mysite.key 4096 : cr\u00e9ation de cl\u00e9s RSA (les deux sont contenues dans mysite.key) openssl req -new -key mysite.key -out mysite.csr : cr\u00e9ation d'une requ\u00eate \u00e0 partir d'une cl\u00e9 openssl req -x509 -newkey rsa:4096 -keyout mysite.key -out mysite.crt -days 365 : (x509=format certificat) cr\u00e9er un certificat autosign\u00e9 openssl x509 -in mysite.crt -text -noout : lire un certificat openssl x509 -req -in site.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out site.crt -extfile site.cnf -extensions req... : signer une requete avec une CA Faire attention aux subject alternative name (obligatoire)","title":"OpenSSL"},{"location":"stratis/","text":"Stratis Installer Installer stratis-cli et stratisd stratisd: service stratis-cli: contient les commandes stratis Cr\u00e9er stratis pool create name /dev/* : cr\u00e9er un pool stratis pool add-data name /dev/* : ajouter \u00e0 un pool stratis filesystem create poolname name : ajouter FS \u00e0 un pool Ajouter dans fstab: UUID=c7b57190-8fba-463e-8ec8-29c80703d45e /dir1 xfs defaults,x-systemd.requires=stratisd.service 0 0","title":"Stratis"},{"location":"stratis/#stratis","text":"","title":"Stratis"},{"location":"stratis/#installer","text":"Installer stratis-cli et stratisd stratisd: service stratis-cli: contient les commandes stratis","title":"Installer"},{"location":"stratis/#creer","text":"stratis pool create name /dev/* : cr\u00e9er un pool stratis pool add-data name /dev/* : ajouter \u00e0 un pool stratis filesystem create poolname name : ajouter FS \u00e0 un pool Ajouter dans fstab: UUID=c7b57190-8fba-463e-8ec8-29c80703d45e /dir1 xfs defaults,x-systemd.requires=stratisd.service 0 0","title":"Cr\u00e9er"},{"location":"swap/","text":"Configurer swap Utiliser parted, file system linux-swap udevadm settle mkswap formate en swap swapon pour monter le swap UUID=39e2667a-9458-42fe-9665-c5c854605881 swap swap defaults 0 0 UUID=39e2667a-9458-42fe-9665-c5c854605881 swap swap pri=4 0 0 UUID=fbd7fa60-b781-44a8-961b-37ac3ef572bf swap swap pri=10 0 0 pri d\u00e9finit la priorit\u00e9, plus elle est basse, moins elle sera choisie","title":"Swap"},{"location":"swap/#configurer-swap","text":"Utiliser parted, file system linux-swap udevadm settle mkswap formate en swap swapon pour monter le swap UUID=39e2667a-9458-42fe-9665-c5c854605881 swap swap defaults 0 0 UUID=39e2667a-9458-42fe-9665-c5c854605881 swap swap pri=4 0 0 UUID=fbd7fa60-b781-44a8-961b-37ac3ef572bf swap swap pri=10 0 0 pri d\u00e9finit la priorit\u00e9, plus elle est basse, moins elle sera choisie","title":"Configurer swap"},{"location":"umask/","text":"Umask umask : non permanent edit in /etc/bashrc for non-login shell edit in /etc/login.defs for login shell Add umask xxx to .bashrc in home directory of specific user","title":"umask"},{"location":"umask/#umask","text":"umask : non permanent edit in /etc/bashrc for non-login shell edit in /etc/login.defs for login shell Add umask xxx to .bashrc in home directory of specific user","title":"Umask"}]}
{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to my notes.","title":"Welcome to my notes."},{"location":"#welcome-to-my-notes","text":"","title":"Welcome to my notes."},{"location":"ansible/","text":"Installer ansible pip index versions ansible pip install ansible==version Configurer ansible touch ansible.cfg vim ansible.cfg Contenu de ansible.cfg: { [defaults] inventory=./inventory } touch inventory vim inventory Contenu de inventory: { hostname ansible_host=0.0.0.0 ansible_user=user ansible_private_key_file=/path [group] hostname } Installer sshpass dnf install sshpass","title":"Installer"},{"location":"ansible/#installer-ansible","text":"pip index versions ansible pip install ansible==version","title":"Installer ansible"},{"location":"ansible/#configurer-ansible","text":"touch ansible.cfg vim ansible.cfg Contenu de ansible.cfg: { [defaults] inventory=./inventory } touch inventory vim inventory Contenu de inventory: { hostname ansible_host=0.0.0.0 ansible_user=user ansible_private_key_file=/path [group] hostname }","title":"Configurer ansible"},{"location":"ansible/#installer-sshpass","text":"dnf install sshpass","title":"Installer sshpass"},{"location":"ansible_commands/","text":"Commandes adhoc ansible -m ping host -m permet d'appeler un module ansible -k permet de demander le mot de passe pour l'authentification -bK permet de demander les privil\u00e8ges Commandes playbook Taches --- - hosts: linux tasks: - name: add a group group: name: exemple state: present Vars vars: collegue: - titi - tata - toto Handlers - name: Add line to conf file lineinfile: path: /path line: new line state: present delegate_to: hostname notify: Restart service handlers: - name: Restart service systemd: name: service state: restarted enabled: yes Un handlers est une tache \u00e0 ex\u00e9cuter uniquement si elle est appel\u00e9e en utilisant notify. Roles Un r\u00f4le est une structure de fichier qui permet de s\u00e9parer les \u00e9l\u00e9ments d'un playbook. ansible-galaxy role init name Permet de cr\u00e9er un role. tasks: permet de stocker les taches handler: stocke les handlers templates: template de texte files: fichier \u00e0 fournir pour le playbook vars: variables qui ne sont pas amen\u00e9es \u00e0 changer default: variables utilisables en extra vars Pour lancer un role, on cr\u00e9e un playbook qui appelle ce role: --- - hosts: webservers roles: - common - webservers","title":"Commandes et playbook"},{"location":"ansible_commands/#commandes-adhoc","text":"ansible -m ping host -m permet d'appeler un module ansible -k permet de demander le mot de passe pour l'authentification -bK permet de demander les privil\u00e8ges","title":"Commandes adhoc"},{"location":"ansible_commands/#commandes-playbook","text":"","title":"Commandes playbook"},{"location":"ansible_commands/#taches","text":"--- - hosts: linux tasks: - name: add a group group: name: exemple state: present","title":"Taches"},{"location":"ansible_commands/#vars","text":"vars: collegue: - titi - tata - toto","title":"Vars"},{"location":"ansible_commands/#handlers","text":"- name: Add line to conf file lineinfile: path: /path line: new line state: present delegate_to: hostname notify: Restart service handlers: - name: Restart service systemd: name: service state: restarted enabled: yes Un handlers est une tache \u00e0 ex\u00e9cuter uniquement si elle est appel\u00e9e en utilisant notify.","title":"Handlers"},{"location":"ansible_commands/#roles","text":"Un r\u00f4le est une structure de fichier qui permet de s\u00e9parer les \u00e9l\u00e9ments d'un playbook. ansible-galaxy role init name Permet de cr\u00e9er un role. tasks: permet de stocker les taches handler: stocke les handlers templates: template de texte files: fichier \u00e0 fournir pour le playbook vars: variables qui ne sont pas amen\u00e9es \u00e0 changer default: variables utilisables en extra vars Pour lancer un role, on cr\u00e9e un playbook qui appelle ce role: --- - hosts: webservers roles: - common - webservers","title":"Roles"},{"location":"apache/","text":"Installer apache dnf install httpd Configuration apache Fichier de conf: /ect/httpd/conf/httpd.conf La ligne documentroot montre l'endroit o\u00f9 apache va chercher son fichier index.html","title":"Configurer apache"},{"location":"apache/#installer-apache","text":"dnf install httpd","title":"Installer apache"},{"location":"apache/#configuration-apache","text":"Fichier de conf: /ect/httpd/conf/httpd.conf La ligne documentroot montre l'endroit o\u00f9 apache va chercher son fichier index.html","title":"Configuration apache"},{"location":"commandes_rhel/","text":"Commandes \u00e0 connaitre findmnt: montre l'arborescence syst\u00e8me df -h: voir les FS which: trouver le r\u00e9pertoire d'une commande ps aux: voir les processes lscpu: infos cpu top: monitorer le system ss: liste les connexions r\u00e9seau lsblk: voir les block device mkfs: cr\u00e9er un FS tune2fs: g\u00e9rer FS en ext4 xfs_admin: FS ex xfs blkid: voir les ID de FS history + !number: rappeler une commande CTRL+R: rechercher une commande man -k: chercher un man par mot-cl\u00e9","title":"Commandes \u00e0 connaitre"},{"location":"commandes_rhel/#commandes-a-connaitre","text":"findmnt: montre l'arborescence syst\u00e8me df -h: voir les FS which: trouver le r\u00e9pertoire d'une commande ps aux: voir les processes lscpu: infos cpu top: monitorer le system ss: liste les connexions r\u00e9seau lsblk: voir les block device mkfs: cr\u00e9er un FS tune2fs: g\u00e9rer FS en ext4 xfs_admin: FS ex xfs blkid: voir les ID de FS history + !number: rappeler une commande CTRL+R: rechercher une commande man -k: chercher un man par mot-cl\u00e9","title":"Commandes \u00e0 connaitre"},{"location":"create_lvm/","text":"Cr\u00e9er un LVM pvcreate /dev/sdb vgcreate vgdata /dev/sdb lvcreate: -n lvdata -L 15G vgdata mkfs -t ext4 /dev/vgdata/lvdata Edit fstab pour qu'il se monte automatiquement o\u00f9 on veut Resize LVM umount /dev/vgdata/lvdata e2fsck /dev/vgdata/lvdata lvreduce -r -L size /dev/vgdata/lvdata ATTENTION: le FS ne doit pas \u00eatre utilis\u00e9.","title":"Cr\u00e9er et resize un LVM"},{"location":"create_lvm/#creer-un-lvm","text":"pvcreate /dev/sdb vgcreate vgdata /dev/sdb lvcreate: -n lvdata -L 15G vgdata mkfs -t ext4 /dev/vgdata/lvdata Edit fstab pour qu'il se monte automatiquement o\u00f9 on veut","title":"Cr\u00e9er un LVM"},{"location":"create_lvm/#resize-lvm","text":"umount /dev/vgdata/lvdata e2fsck /dev/vgdata/lvdata lvreduce -r -L size /dev/vgdata/lvdata ATTENTION: le FS ne doit pas \u00eatre utilis\u00e9.","title":"Resize LVM"},{"location":"firewall/","text":"firewalld Zones block: refuse toutes les connexions entrantes dmz: seulements les connexions selectionn\u00e9es sont accept\u00e9es drop: tout packet entrant est recup\u00e9r\u00e9 et aucune reponse envoy\u00e9e external: utilis\u00e9 sur les routeurs (NAT) home: pour les r\u00e9seaux domestiques internal: pareil que home public: les autres ordinateurs du r\u00e9seau ne sont pas accept\u00e9s. trusted: toutes les connexions sont acceptes work: comme home et internal mais au travail Commande firewall-cmd","title":"Firewall"},{"location":"firewall/#firewalld","text":"","title":"firewalld"},{"location":"firewall/#zones","text":"block: refuse toutes les connexions entrantes dmz: seulements les connexions selectionn\u00e9es sont accept\u00e9es drop: tout packet entrant est recup\u00e9r\u00e9 et aucune reponse envoy\u00e9e external: utilis\u00e9 sur les routeurs (NAT) home: pour les r\u00e9seaux domestiques internal: pareil que home public: les autres ordinateurs du r\u00e9seau ne sont pas accept\u00e9s. trusted: toutes les connexions sont acceptes work: comme home et internal mais au travail","title":"Zones"},{"location":"firewall/#commande","text":"firewall-cmd","title":"Commande"},{"location":"pip_venv/","text":"Cr\u00e9er l'environnement virtuel python3 -m venv name Lancer l'environnement virtuel source activate /path","title":"Cr\u00e9er un environnement virtuel"},{"location":"pip_venv/#creer-lenvironnement-virtuel","text":"python3 -m venv name","title":"Cr\u00e9er l'environnement virtuel"},{"location":"pip_venv/#lancer-lenvironnement-virtuel","text":"source activate /path","title":"Lancer l'environnement virtuel"},{"location":"root_password/","text":"R\u00e9initialiser MDP root Red\u00e9marrer Dans le menu GRUB, appuyer sur \"e\" changer quiet par rd.break mount -o remount,rw /sysroot chroot /sysroot Changer le mdp touch /.autorelabel","title":"R\u00e9initialiser mot de passe root"},{"location":"root_password/#reinitialiser-mdp-root","text":"Red\u00e9marrer Dans le menu GRUB, appuyer sur \"e\" changer quiet par rd.break mount -o remount,rw /sysroot chroot /sysroot Changer le mdp touch /.autorelabel","title":"R\u00e9initialiser MDP root"},{"location":"shell-expansion/","text":"Regex \"?\" : remplace 1 lettre \"*\" : 0 ou plusieurs lettres [abc]: un caract\u00e8re parmi a, b ou c [!abc]: un caract\u00e8re saus a, b ou c [[:alpha:]]: une lettre [[:lower:]]: une lettre minuscule [[:upper:]]: une lettre majuscule [[:digit:]]: un chiffre ^: d\u00e9but de ligne $: fin de ligne touch hugo{0..9}: cr\u00e9e un fichier hugo0, hugo1, ..., hugo9","title":"Regex"},{"location":"shell-expansion/#regex","text":"\"?\" : remplace 1 lettre \"*\" : 0 ou plusieurs lettres [abc]: un caract\u00e8re parmi a, b ou c [!abc]: un caract\u00e8re saus a, b ou c [[:alpha:]]: une lettre [[:lower:]]: une lettre minuscule [[:upper:]]: une lettre majuscule [[:digit:]]: un chiffre ^: d\u00e9but de ligne $: fin de ligne touch hugo{0..9}: cr\u00e9e un fichier hugo0, hugo1, ..., hugo9","title":"Regex"}]}